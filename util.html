<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Utility Functions &mdash; LensKit 0.14.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=a9ba800c"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="/_/static/javascript/readthedocs-doc-embed.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Utilities" href="data.html" />
    <link rel="prev" title="Algorithm Implementation Tips" href="impl-tips.html" /> 

<!-- RTD Extra Head -->

<link rel="stylesheet" href="/_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "util", "programming_language": "py", "project": "lkpy", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {"lenskit-hpf": "https://lkpy.readthedocs.io/projects/lenskit-hpf/en/stable/", "lenskit-implicit": "https://lkpy.readthedocs.io/projects/lenskit-implicit/en/latest/", "lenskit-tf": "https://lkpy.readthedocs.io/projects/lenskit-tf/en/latest/"}, "theme": "sphinx_rtd_theme", "user_analytics_code": "", "version": "0.14.3"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="/_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            LensKit
          </a>
              <div class="version">
                0.14.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install LensKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lenskit/lkpy/releases">Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Running Experiments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Loading Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="crossfold.html">Splitting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Batch-Running Recommenders</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation/index.html">Evaluating Recommender Output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Algorithms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Algorithm Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Algorithm Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic and Utility Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="ranking.html">Ranking Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="bias.html">Bias</a></li>
<li class="toctree-l1"><a class="reference internal" href="knn.html">k-NN Collaborative Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="mf.html">Classic Matrix Factorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="addons.html">Add-On Algorithms</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tips and Tricks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics.html">Errors and Diagnostics</a></li>
<li class="toctree-l1"><a class="reference internal" href="impl-tips.html">Algorithm Implementation Tips</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration and Internals</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utility Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data.html">Data Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-lenskit.util">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.log_to_stderr"><code class="docutils literal notranslate"><span class="pre">log_to_stderr()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.log_to_notebook"><code class="docutils literal notranslate"><span class="pre">log_to_notebook()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.Stopwatch"><code class="docutils literal notranslate"><span class="pre">Stopwatch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.rng"><code class="docutils literal notranslate"><span class="pre">rng()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.init_rng"><code class="docutils literal notranslate"><span class="pre">init_rng()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.derivable_rng"><code class="docutils literal notranslate"><span class="pre">derivable_rng()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.proc_count"><code class="docutils literal notranslate"><span class="pre">proc_count()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lenskit.util.clone"><code class="docutils literal notranslate"><span class="pre">clone()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">LensKit Internals</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LensKit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Utility Functions</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/lenskit/lkpy/blob/0.14.3/docs/util.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="utility-functions">
<h1>Utility Functions<a class="headerlink" href="#utility-functions" title="Link to this heading"></a></h1>
<p>These utility functions are useful for data processing.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data.html#building-ratings-matrices">Building Ratings Matrices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data.html#lenskit.data.sparse_ratings"><code class="docutils literal notranslate"><span class="pre">sparse_ratings()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html#lenskit.data.RatingMatrix"><code class="docutils literal notranslate"><span class="pre">RatingMatrix</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="data.html#lenskit.data.RatingMatrix.matrix"><code class="docutils literal notranslate"><span class="pre">RatingMatrix.matrix</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#lenskit.data.RatingMatrix.users"><code class="docutils literal notranslate"><span class="pre">RatingMatrix.users</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#lenskit.data.RatingMatrix.items"><code class="docutils literal notranslate"><span class="pre">RatingMatrix.items</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#id0"><code class="docutils literal notranslate"><span class="pre">RatingMatrix.items</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#id1"><code class="docutils literal notranslate"><span class="pre">RatingMatrix.matrix</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="data.html#id2"><code class="docutils literal notranslate"><span class="pre">RatingMatrix.users</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data.html#module-lenskit.data.sampling">Sampling Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data.html#lenskit.data.sampling.neg_sample"><code class="docutils literal notranslate"><span class="pre">neg_sample()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html#lenskit.data.sampling.sample_unweighted"><code class="docutils literal notranslate"><span class="pre">sample_unweighted()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html#lenskit.data.sampling.sample_weighted"><code class="docutils literal notranslate"><span class="pre">sample_weighted()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="math.html">Math utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="math.html#module-lenskit.math.solve">Solvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="math.html#lenskit.math.solve.dposv"><code class="docutils literal notranslate"><span class="pre">dposv()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="math.html#numba-accessible-internals">Numba-accessible internals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="math.html#lenskit.math.solve._dposv"><code class="docutils literal notranslate"><span class="pre">_dposv()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="module-lenskit.util">
<span id="miscellaneous"></span><h2>Miscellaneous<a class="headerlink" href="#module-lenskit.util" title="Link to this heading"></a></h2>
<p>Miscellaneous utility functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="lenskit.util.log_to_stderr">
<span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">log_to_stderr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.log_to_stderr" title="Link to this definition"></a></dt>
<dd><p>Set up the logging infrastructure to show log output on <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>, where it will
appear in the IPython message log.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lenskit.util.log_to_notebook">
<span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">log_to_notebook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.log_to_notebook" title="Link to this definition"></a></dt>
<dd><p>Set up the logging infrastructure to show log output in the Jupyter notebook.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lenskit.util.Stopwatch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">Stopwatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.Stopwatch" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Timer class for recording elapsed wall time in operations.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lenskit.util.rng">
<span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">rng</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legacy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.rng" title="Link to this definition"></a></dt>
<dd><p>Get a random number generator.  This is similar to <code class="xref py py-func docutils literal notranslate"><span class="pre">sklearn.utils.check_random_seed()</span></code>, but
it usually returns a <a class="reference external" href="https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.random.Generator</span></code></a> instead.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is deprecated. Use <a class="reference external" href="https://seedbank.lenskit.org/en/latest/api.html#seedbank.numpy_rng" title="(in SeedBank)"><code class="xref py py-func docutils literal notranslate"><span class="pre">seedbank.numpy_rng()</span></code></a> instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – <p>The spec for this RNG.  Can be any of the following types:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.random.SeedSequence</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/random/legacy.html#numpy.random.RandomState" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.random.mtrand.RandomState</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.random.Generator</span></code></a></p></li>
</ul>
</p></li>
<li><p><strong>legacy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return <a class="reference external" href="https://numpy.org/doc/stable/reference/random/legacy.html#numpy.random.RandomState" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.random.mtrand.RandomState</span></code></a> instead of a new-style
<a class="reference external" href="https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.random.Generator</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A random number generator.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator" title="(in NumPy v1.26)">numpy.random.Generator</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lenskit.util.init_rng">
<span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">init_rng</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">propagate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.init_rng" title="Link to this definition"></a></dt>
<dd><p>Initialize the random infrastructure with a seed.  This function should generally be
called very early in the setup.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is deprecated. Use <a class="reference external" href="https://seedbank.lenskit.org/en/latest/api.html#seedbank.initialize" title="(in SeedBank)"><code class="xref py py-func docutils literal notranslate"><span class="pre">seedbank.initialize()</span></code></a> instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> or </em><a class="reference external" href="https://numpy.org/doc/stable/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.26)"><em>numpy.random.SeedSequence</em></a>) – The random seed to initialize with.</p></li>
<li><p><strong>keys</strong> – Additional keys, to use as a <code class="docutils literal notranslate"><span class="pre">spawn_key</span></code> on NumPy 1.17.  Passed to
<code class="xref py py-func docutils literal notranslate"><span class="pre">derive_seed()</span></code>.</p></li>
<li><p><strong>propagate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – <p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, initialize other RNG infrastructure. This currently initializes:</p>
<ul>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">np.random.seed()</span></code></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/random.html#random.seed" title="(in Python v3.12)"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.seed()</span></code></a></p></li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">propagate=False</span></code>, LensKit is still fully seeded — no component included
with LensKit uses any of the global RNGs, they all use RNGs seeded with the
specified seed.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The random seed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lenskit.util.derivable_rng">
<span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">derivable_rng</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legacy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.derivable_rng" title="Link to this definition"></a></dt>
<dd><p>Get a derivable RNG, for use cases where the code needs to be able to reproducibly derive
sub-RNGs for different keys, such as user IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spec</strong> – <p>Any value supported by the <cite>seed</cite> parameter of <a class="reference external" href="https://seedbank.lenskit.org/en/latest/api.html#seedbank.numpy_rng" title="(in SeedBank)"><code class="xref py py-func docutils literal notranslate"><span class="pre">seedbank.numpy_rng()</span></code></a>, in addition
to the following values:</p>
<ul class="simple">
<li><p>the string <code class="docutils literal notranslate"><span class="pre">'user'</span></code></p></li>
<li><p>a tuple of the form (<code class="docutils literal notranslate"><span class="pre">seed</span></code>, <code class="docutils literal notranslate"><span class="pre">'user'</span></code>)</p></li>
</ul>
<p>Either of these forms will cause the returned function to re-derive new RNGs.</p>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A function taking one (or more) key values, like <code class="xref py py-func docutils literal notranslate"><span class="pre">derive_seed()</span></code>, and
returning a random number generator (the type of which is determined by
the <code class="docutils literal notranslate"><span class="pre">legacy</span></code> parameter).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>function</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lenskit.util.proc_count">
<span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">proc_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">core_div</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.proc_count" title="Link to this definition"></a></dt>
<dd><p>Get the number of desired jobs for multiprocessing operations.  This does not
affect Numba or MKL multithreading.</p>
<p>This count can come from a number of sources:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">LK_NUM_PROCS</span></code> environment variable</p></li>
<li><p>The number of CPUs, divided by <code class="docutils literal notranslate"><span class="pre">core_div</span></code> (default 2)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>core_div</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> or </em><em>None</em>) – The divisor to scale down the number of cores; <code class="docutils literal notranslate"><span class="pre">None</span></code> to turn off core-based
fallback.</p></li>
<li><p><strong>max_default</strong> – The maximum number of processes to use if the environment variable is not
configured.</p></li>
<li><p><strong>level</strong> – The process nesting level.  0 is the outermost level of parallelism; subsequent
levels control nesting.  Levels deeper than 1 are rare, and it isn’t expected
that callers actually have an accurate idea of the threading nesting, just that
they are configuring a child.  If the process count is unconfigured, then level
1 will use <code class="docutils literal notranslate"><span class="pre">core_div</span></code>, and deeper levels will use 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of jobs desired.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="lenskit.util.clone">
<span class="sig-prename descclassname"><span class="pre">lenskit.util.</span></span><span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algo</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.util.clone" title="Link to this definition"></a></dt>
<dd><p>Clone an algorithm, but not its fitted data.  This is like
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.base.clone.html#sklearn.base.clone" title="(in scikit-learn v1.4)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sklearn.base.clone()</span></code></a>, but may not work on arbitrary SciKit estimators.
LensKit algorithms are compatible with SciKit clone, however, so feel free
to use that if you need more general capabilities.</p>
<p>This function is somewhat derived from the SciKit one.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lenskit.algorithms.bias</span> <span class="kn">import</span> <span class="n">Bias</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orig</span> <span class="o">=</span> <span class="n">Bias</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy</span> <span class="o">=</span> <span class="n">clone</span><span class="p">(</span><span class="n">orig</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy</span> <span class="ow">is</span> <span class="n">orig</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy</span><span class="o">.</span><span class="n">damping</span> <span class="o">==</span> <span class="n">orig</span><span class="o">.</span><span class="n">damping</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="impl-tips.html" class="btn btn-neutral float-left" title="Algorithm Implementation Tips" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="data.html" class="btn btn-neutral float-right" title="Data Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018–2019 Boise State University.
      <span class="commit">Revision <code>f34809ae</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
<p>This material is based upon work supported by the National Science Foundation under
Grant No. <a href="https://md.ekstrandom.net/research/career">IIS 17-51278</a>. Any
opinions, findings, and conclusions or recommendations expressed in this material
are those of the author(s) and do not necessarily reflect the views of the
National Science Foundation.  This page has not been approved by
Boise State University and does not reflect official university positions.</p>
<script data-goatcounter="https://lenskit.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>


</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 0.14.3
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/0.14.3/">0.14.3</a></dd>
        
          <dd><a href="/en/0.14.2/">0.14.2</a></dd>
        
          <dd><a href="/en/0.14.1/">0.14.1</a></dd>
        
          <dd><a href="/en/0.14.0/">0.14.0</a></dd>
        
          <dd><a href="/en/0.13.1/">0.13.1</a></dd>
        
          <dd><a href="/en/0.13.0/">0.13.0</a></dd>
        
          <dd><a href="/en/0.12.3/">0.12.3</a></dd>
        
          <dd><a href="/en/0.12.2/">0.12.2</a></dd>
        
          <dd><a href="/en/0.12.1/">0.12.1</a></dd>
        
          <dd><a href="/en/0.12.0/">0.12.0</a></dd>
        
          <dd><a href="/en/0.11.1/">0.11.1</a></dd>
        
          <dd><a href="/en/0.11.0/">0.11.0</a></dd>
        
          <dd><a href="/en/0.10.1/">0.10.1</a></dd>
        
          <dd><a href="/en/0.10.0/">0.10.0</a></dd>
        
          <dd><a href="/en/0.9.0/">0.9.0</a></dd>
        
          <dd><a href="/en/0.8.4/">0.8.4</a></dd>
        
          <dd><a href="/en/0.8.1/">0.8.1</a></dd>
        
          <dd><a href="/en/0.8.0/">0.8.0</a></dd>
        
          <dd><a href="/en/0.7.0/">0.7.0</a></dd>
        
          <dd><a href="/en/0.6.1/">0.6.1</a></dd>
        
          <dd><a href="/en/0.6.0/">0.6.0</a></dd>
        
          <dd><a href="/en/0.5.0/">0.5.0</a></dd>
        
          <dd><a href="/en/0.3.0/">0.3.0</a></dd>
        
          <dd><a href="/en/0.2.0/">0.2.0</a></dd>
        
          <dd><a href="/en/0.1.0/">0.1.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/lkpy/?fromdocs=lkpy">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/lkpy/?fromdocs=lkpy">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>