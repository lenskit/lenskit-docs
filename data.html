
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Data Management" />
<meta property="og:type" content="website" />
<meta property="og:url" content="data.html" />
<meta property="og:site_name" content="LensKit" />
<meta property="og:description" content="LensKit provides a unified data model for recommender systems data along with classes and utility functions for working with it, described in this section of the manual. Data Model and Key Concepts..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="/_images/social_previews/summary_data_ae8c1d71.png" />
<meta property="og:image:alt" content="LensKit provides a unified data model for recommender systems data along with classes and utility functions for working with it, described in this section of..." />
<meta name="description" content="LensKit provides a unified data model for recommender systems data along with classes and utility functions for working with it, described in this section of the manual. Data Model and Key Concepts..." />
<meta name="twitter:card" content="summary_large_image" />

    <title>Data Management &#8212; LensKit 0.15.0.dev1146+gb922d6cb documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=a58cd7ed"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'data';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://lkpy.lenskit.org/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2024.0dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="canonical" href="https://lkpy.lenskit.org/en/latest/data.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Splitting Data" href="splitting.html" />
    <link rel="prev" title="2024 Releases" href="releases/2024.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/LKLogo2.png" class="logo__image only-light" alt="LensKit 0.15.0.dev1146+gb922d6cb documentation - Home"/>
    <script>document.write(`<img src="_static/LKLogo2.png" class="logo__image only-dark" alt="LensKit 0.15.0.dev1146+gb922d6cb documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    LensKit
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install LensKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="releases/index.html">Release Notes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="releases/2024.html">2024 Releases</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/lenskit/lkpy/releases">Older Versions</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Running Experiments</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Data Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="splitting.html">Splitting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Batch-Running Recommenders</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="evaluation/index.html">Evaluating Recommender Output</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="evaluation/predict-metrics.html">Prediction Accuracy Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation/topn-metrics.html">Top-<em>N</em> Evaluation</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="documenting.html">Documenting Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">Parallel Execution</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Algorithms</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Algorithm Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Recommendation Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Algorithm Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic and Utility Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="ranking.html">Ranking Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="bias.html">Bias</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="knn.html">k-NN Collaborative Filtering</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="mf.html">Classic Matrix Factorization</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="addons/index.html">Add-On Algorithms</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="addons/implicit.html">Implicit wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons/hpf.html">Poisson factorization</a></li>
<li class="toctree-l2"><a class="reference external" href="https://lkpy.lenskit.org/projects/lenskit-tf/">TensorFlow algorithms</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tips and Tricks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics.html">Errors and Diagnostics</a></li>
<li class="toctree-l1"><a class="reference internal" href="impl-tips.html">Algorithm Implementation Tips</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuration and Internals</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="util.html">Utility Functions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math utilities</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">LensKit Internals</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="header-article-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Data Management</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-model-and-key-concepts">Data Model and Key Concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-identifiers">Identifiers</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.EntityId"><code class="docutils literal notranslate"><span class="pre">EntityId</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-abstraction">Dataset Abstraction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset"><code class="docutils literal notranslate"><span class="pre">Dataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.items"><code class="docutils literal notranslate"><span class="pre">Dataset.items</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.users"><code class="docutils literal notranslate"><span class="pre">Dataset.users</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.count"><code class="docutils literal notranslate"><span class="pre">Dataset.count()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.interaction_count"><code class="docutils literal notranslate"><span class="pre">Dataset.interaction_count</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.rating_count"><code class="docutils literal notranslate"><span class="pre">Dataset.rating_count</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.interaction_log"><code class="docutils literal notranslate"><span class="pre">Dataset.interaction_log()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.interaction_matrix"><code class="docutils literal notranslate"><span class="pre">Dataset.interaction_matrix()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.user_profile"><code class="docutils literal notranslate"><span class="pre">Dataset.user_profile()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.item_stats"><code class="docutils literal notranslate"><span class="pre">Dataset.item_stats()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.user_stats"><code class="docutils literal notranslate"><span class="pre">Dataset.user_stats()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-datasets">Creating Datasets</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.from_interactions_df"><code class="docutils literal notranslate"><span class="pre">from_interactions_df()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-common-datasets">Loading Common Datasets</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.load_movielens"><code class="docutils literal notranslate"><span class="pre">load_movielens()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vocabularies">Vocabularies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary"><code class="docutils literal notranslate"><span class="pre">Vocabulary</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.name"><code class="docutils literal notranslate"><span class="pre">Vocabulary.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.index"><code class="docutils literal notranslate"><span class="pre">Vocabulary.index</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.size"><code class="docutils literal notranslate"><span class="pre">Vocabulary.size</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.number"><code class="docutils literal notranslate"><span class="pre">Vocabulary.number()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.numbers"><code class="docutils literal notranslate"><span class="pre">Vocabulary.numbers()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.term"><code class="docutils literal notranslate"><span class="pre">Vocabulary.term()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.terms"><code class="docutils literal notranslate"><span class="pre">Vocabulary.terms()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.id"><code class="docutils literal notranslate"><span class="pre">Vocabulary.id()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.ids"><code class="docutils literal notranslate"><span class="pre">Vocabulary.ids()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.copy"><code class="docutils literal notranslate"><span class="pre">Vocabulary.copy()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user-and-item-data">User and Item Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#user-profiles">User Profiles</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile"><code class="docutils literal notranslate"><span class="pre">UserProfile</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile.id"><code class="docutils literal notranslate"><span class="pre">UserProfile.id</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile.past_items"><code class="docutils literal notranslate"><span class="pre">UserProfile.past_items</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile.item_list"><code class="docutils literal notranslate"><span class="pre">UserProfile.item_list()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#item-lists">Item Lists</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList"><code class="docutils literal notranslate"><span class="pre">ItemList</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.ordered"><code class="docutils literal notranslate"><span class="pre">ItemList.ordered</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.from_df"><code class="docutils literal notranslate"><span class="pre">ItemList.from_df()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.clone"><code class="docutils literal notranslate"><span class="pre">ItemList.clone()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.ids"><code class="docutils literal notranslate"><span class="pre">ItemList.ids()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.numbers"><code class="docutils literal notranslate"><span class="pre">ItemList.numbers()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.scores"><code class="docutils literal notranslate"><span class="pre">ItemList.scores()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.ranks"><code class="docutils literal notranslate"><span class="pre">ItemList.ranks()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.to_df"><code class="docutils literal notranslate"><span class="pre">ItemList.to_df()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.item_list"><code class="docutils literal notranslate"><span class="pre">ItemList.item_list()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.HasItemList"><code class="docutils literal notranslate"><span class="pre">HasItemList</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.HasItemList.item_list"><code class="docutils literal notranslate"><span class="pre">HasItemList.item_list()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-lenskit.data.tables">User-Item Data Tables</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.user_nums"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.user_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.item_nums"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.item_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.ratings"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.ratings</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.timestamps"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.timestamps</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.user_nums"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.user_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.item_nums"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.item_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.ratings"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.ratings</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.timestamps"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.timestamps</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-lenskit.data.dataset">Dataset Implementations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matrix-dataset">Matrix Dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.dataset.MatrixDataset"><code class="docutils literal notranslate"><span class="pre">MatrixDataset</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lazy-dataset">Lazy Dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.dataset.LazyDataset"><code class="docutils literal notranslate"><span class="pre">LazyDataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.dataset.LazyDataset.delegate"><code class="docutils literal notranslate"><span class="pre">LazyDataset.delegate()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-lenskit.data">
<span id="data-management"></span><h1>Data Management<a class="headerlink" href="#module-lenskit.data" title="Link to this heading">#</a></h1>
<p>LensKit provides a unified data model for recommender systems data along with
classes and utility functions for working with it, described in this section of
the manual.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2024.1: </span>The new <a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> class replaces the Pandas data frames
that were passed to algorithms in the past.  It also subsumes
the old support for producing sparse matrices from rating frames.</p>
</div>
<section id="data-model-and-key-concepts">
<span id="data-model"></span><h2>Data Model and Key Concepts<a class="headerlink" href="#data-model-and-key-concepts" title="Link to this heading">#</a></h2>
<p>The LensKit data model consists of <strong>users</strong>, <strong>items</strong>, and <strong>interactions</strong>,
with fields providing additional (optional) data about each of these entities.
The simplest valid LensKit data set is simply a list of user and item
identifiers indicating which items each user has interacted with.  These may be
augumented with ratings, timestamps, or any other attributes.</p>
<p>Data can be read from a range of sources, but ultimately resolves to a
collection of tables (e.g. Pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>) that record user,
item, and interaction data.</p>
<section id="data-identifiers">
<span id="identifiers"></span><h3>Identifiers<a class="headerlink" href="#data-identifiers" title="Link to this heading">#</a></h3>
<p>Users and items have two identifiers:</p>
<ul>
<li><p>The <em>identifier</em> as presented in the original source table(s).  It appears in
LensKit data frames as <code class="docutils literal notranslate"><span class="pre">user_id</span></code> and <code class="docutils literal notranslate"><span class="pre">item_id</span></code> columns.  Identifiers can
be integers, strings, or byte arrays.</p></li>
<li><p>The <em>number</em> assigned by the dataset handling code.  This is a 0-based
contiguous user or item number that is suitable for indexing into arrays or
matrices, a common operation in recommendation models.  In data frames, this
appears as a <code class="docutils literal notranslate"><span class="pre">user_num</span></code> or <code class="docutils literal notranslate"><span class="pre">item_num</span></code> column.  It is the only
representation supported by NumPy and PyTorch array formats.</p>
<p>User and item numbers are assigned based on sorted identifiers in the initial
data source, so reloading the same data set will yield the same numbers.
Loading a subset, however, is not guaranteed to result in the same numbers, as
the subset may be missing some users or items.</p>
<p>Methods that add additional users or items will assign numbers based on the
sorted identifiers that do not yet have numbers.</p>
</li>
</ul>
<p>Identifiers and numbers can be mapped to each other with the user and item
<em>vocabularies</em> (<a class="reference internal" href="#lenskit.data.Dataset.users" title="lenskit.data.Dataset.users"><code class="xref py py-attr docutils literal notranslate"><span class="pre">users</span></code></a> and <a class="reference internal" href="#lenskit.data.Dataset.items" title="lenskit.data.Dataset.items"><code class="xref py py-attr docutils literal notranslate"><span class="pre">items</span></code></a>, see the
<a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.vocab.Vocabulary"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocabulary</span></code></a> class).</p>
<dl class="py data">
<dt class="sig sig-object py" id="lenskit.data.EntityId">
<span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">EntityId</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">int</span> <span class="pre">|</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">bytes</span></em><a class="headerlink" href="#lenskit.data.EntityId" title="Link to this definition">#</a></dt>
<dd><p>Represent a PEP 604 union type</p>
<p>E.g. for int | str</p>
</dd></dl>

</section>
</section>
<section id="dataset-abstraction">
<span id="dataset"></span><h2>Dataset Abstraction<a class="headerlink" href="#dataset-abstraction" title="Link to this heading">#</a></h2>
<p>The LensKit <a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> class is the standard LensKit interface to datasets
for training, evaluation, etc. Trainable models and components expect a dataset
instance to be passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code>.  It is an
abstract class with implementations covering various scenarios.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.Dataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">Dataset</span></span><a class="headerlink" href="#lenskit.data.Dataset" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a></p>
<p>Representation of a data set for LensKit training, evaluation, etc. Data can
be accessed in a variety of formats depending on the needs of a component.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zero-copy conversions are used whenever possible, so client code must not
modify returned data in-place.</p>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Support for advanced rating situations is not yet supported:</p>
<ul class="simple">
<li><p>repeated ratings</p></li>
<li><p>mixed implicit &amp; explicit feedback</p></li>
<li><p>later actions removing earlier ratings</p></li>
</ul>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Support for item and user content or metadata is not yet implemented.</p>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="lenskit.data.Dataset.items">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">items</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.vocab.Vocabulary"><span class="pre">Vocabulary</span></a></em><a class="headerlink" href="#lenskit.data.Dataset.items" title="Link to this definition">#</a></dt>
<dd><p>The items known by this dataset.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lenskit.data.Dataset.users">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">users</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.vocab.Vocabulary"><span class="pre">Vocabulary</span></a></em><a class="headerlink" href="#lenskit.data.Dataset.users" title="Link to this definition">#</a></dt>
<dd><p>The users known by this dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Dataset.count">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">what</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Dataset.count" title="Link to this definition">#</a></dt>
<dd><p>Count entities in the dataset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The precise counts are subtle in the presence of repeated or
superseded interactions. See <a class="reference internal" href="#lenskit.data.Dataset.interaction_count" title="lenskit.data.Dataset.interaction_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interaction_count()</span></code></a> and
<a class="reference internal" href="#lenskit.data.Dataset.rating_count" title="lenskit.data.Dataset.rating_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rating_count()</span></code></a> for details on the <code class="docutils literal notranslate"><span class="pre">&quot;interactions&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;ratings&quot;</span></code> counts.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>what</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – <p>The type of entity to count.  Commonly-supported ones include:</p>
<ul class="simple">
<li><p>users</p></li>
<li><p>items</p></li>
<li><p>pairs (observed user-item pairs)</p></li>
<li><p>interactions</p></li>
<li><p>ratings</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lenskit.data.Dataset.interaction_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">interaction_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></em><a class="headerlink" href="#lenskit.data.Dataset.interaction_count" title="Link to this definition">#</a></dt>
<dd><p>Count the total number of interaction records.  Equivalent to
<code class="docutils literal notranslate"><span class="pre">count(&quot;interactions&quot;)</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the interaction records themselves reprsent counts, such as the
number of times a song was played, this returns the number of
<em>records</em>, not the total number of plays.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lenskit.data.Dataset.rating_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rating_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></em><a class="headerlink" href="#lenskit.data.Dataset.rating_count" title="Link to this definition">#</a></dt>
<dd><p>Count the total number of ratings (excluding superseded ratings).
Equivalent to <code class="docutils literal notranslate"><span class="pre">count(&quot;ratings&quot;)</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Dataset.interaction_log">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">interaction_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Dataset.interaction_log" title="Link to this definition">#</a></dt>
<dd><p>Get the user-item interactions as a table in the requested format. The
table is not in a specified order.  Interactions may be repeated (e.g.
the same user may listen to a song multiple times).  For a non-repeated
“ratings matrix” view of the data, see <a class="reference internal" href="#lenskit.data.Dataset.interaction_matrix" title="lenskit.data.Dataset.interaction_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interaction_matrix()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Client code <strong>must not</strong> perform in-place modifications on the table
returned from this method.  Whenever possible, it will be a shallow
view on top of the underlying storage, and modifications may corrupt
data for other code.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – <p>The desired data format.  Currently-supported formats are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;pandas&quot;</span></code> — returns a <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>.  The index
is not meaningful.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;numpy&quot;</span></code> — returns a <a class="reference internal" href="#lenskit.data.tables.NumpyUserItemTable" title="lenskit.data.tables.NumpyUserItemTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumpyUserItemTable</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;torch&quot;</span></code> — returns a <a class="reference internal" href="#lenskit.data.tables.TorchUserItemTable" title="lenskit.data.tables.TorchUserItemTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">TorchUserItemTable</span></code></a>.</p></li>
</ul>
</p></li>
<li><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>] </em><em>| </em><em>None</em>) – Which fields to include.  If set to <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code>, will include all
available fields in the resulting table; <code class="docutils literal notranslate"><span class="pre">None</span></code> includes no
fields besides the user and item.  Commonly-available fields
include <code class="docutils literal notranslate"><span class="pre">&quot;rating&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;timestamp&quot;</span></code>.  Missing fields will
be omitted in the result.</p></li>
<li><p><strong>original_ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return user and item IDs as represented in the
original source data in columns named <code class="docutils literal notranslate"><span class="pre">user_id</span></code> and
<code class="docutils literal notranslate"><span class="pre">item_id</span></code>, instead of the user and item numbers typically
returned.  Only applicable to the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> format. See
<a class="reference internal" href="#data-identifiers"><span class="std std-ref">Identifiers</span></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The user-item interaction log in the specified format.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Dataset.interaction_matrix">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">interaction_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legacy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Dataset.interaction_matrix" title="Link to this definition">#</a></dt>
<dd><p>Get the user-item interactions as “ratings” matrix.  Interactions are
not repeated.  The matrix may be in “coordinate” format, in which case
it is comparable to <a class="reference internal" href="#lenskit.data.Dataset.interaction_log" title="lenskit.data.Dataset.interaction_log"><code class="xref py py-meth docutils literal notranslate"><span class="pre">interaction_log()</span></code></a> but without repeated
interactions, or it may be in a compressed sparse format.</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Aggregate is currently ignored because repeated interactions are not
yet supported.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Client code <strong>must not</strong> perform in-place modifications on the matrix
returned from this method.  Whenever possible, it will be a shallow
view on top of the underlying storage, and modifications may corrupt
data for other code.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – <p>The desired data format.  Currently-supported formats are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;pandas&quot;</span></code> — returns a <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;torch&quot;</span></code> — returns a sparse <a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">torch.Tensor</span></code></a> (see
<a class="reference external" href="https://pytorch.org/docs/stable/sparse.html#module-torch.sparse" title="(in PyTorch v2.4)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">torch.sparse</span></code></a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;scipy&quot;</span></code> — returns a sparse array from <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/sparse.html#module-scipy.sparse" title="(in SciPy v1.14.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.sparse</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;structure&quot;</span></code> — returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">CSRStructure</span></code>
containing only the user and item numbers in compressed sparse
row format.</p></li>
</ul>
</p></li>
<li><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – <p>Which field to return in the matrix.  Common fields include
<code class="docutils literal notranslate"><span class="pre">&quot;rating&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;timestamp&quot;</span></code>.</p>
<p>If unspecified (<code class="docutils literal notranslate"><span class="pre">None</span></code>), this will yield an implicit-feedback
indicator matrix, with 1s for observed items; the <code class="docutils literal notranslate"><span class="pre">&quot;pandas&quot;</span></code>
format will only include user and item columns.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">rating</span></code> field is requested but is not defined in the
underlying data, then this is equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;indicator&quot;</span></code>,
except that the <code class="docutils literal notranslate"><span class="pre">&quot;pandas&quot;</span></code> format will include a <code class="docutils literal notranslate"><span class="pre">&quot;rating&quot;</span></code>
column of all 1s.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&quot;pandas&quot;</span></code> format also supports the special field name
<code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> to return a data frame with all available fields. When
<code class="docutils literal notranslate"><span class="pre">field=&quot;all&quot;</span></code>, a field named <code class="docutils literal notranslate"><span class="pre">count</span></code> (if defined) is
combined with the <code class="docutils literal notranslate"><span class="pre">sum</span></code> method, and other fields use <code class="docutils literal notranslate"><span class="pre">last</span></code>.</p>
</p></li>
<li><p><strong>combine</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – <p>How to combine multiple observations for a single user-item
pair. Available methods are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;count&quot;</span></code> — count the user-item interactions. Only valid
when <code class="docutils literal notranslate"><span class="pre">field=None</span></code>; if the underlying data defines a
<code class="docutils literal notranslate"><span class="pre">count</span></code> field, then this is equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;sum&quot;</span></code> on that
field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;sum&quot;</span></code> — sum the field values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;first&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;last&quot;</span></code> — take the first or last value seen
(in timestamp order, if timestamps are defined; otherwise,
their order in the original input).</p></li>
</ul>
</p></li>
<li><p><strong>layout</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – The layout for a sparse matrix.  Can be either <code class="docutils literal notranslate"><span class="pre">csr</span></code> or
<code class="docutils literal notranslate"><span class="pre">coo</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code> to use the default for the specified
format.  CSR is only supported by Torch and SciPy backends.</p></li>
<li><p><strong>legacy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> to return a legacy SciPy sparse matrix instead of
sparse array.</p></li>
<li><p><strong>original_ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> to return user and item IDs instead of numbers in
<code class="docutils literal notranslate"><span class="pre">pandas</span></code>-format matrix.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Dataset.user_profile">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Dataset.user_profile" title="Link to this definition">#</a></dt>
<dd><p>Get a user’s row from the interaction matrix.  Available fields are
returned as fields. If the dataset has ratings, these are provided as a
<code class="docutils literal notranslate"><span class="pre">rating</span></code> field, <strong>not</strong> as the item scores.  The item list is unordered,
but items are returned in order by item number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><em>bytes</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>user_num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#lenskit.data.UserProfile" title="lenskit.data.user.UserProfile"><em>UserProfile</em></a> | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Dataset.item_stats">
<span class="sig-name descname"><span class="pre">item_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Dataset.item_stats" title="Link to this definition">#</a></dt>
<dd><p>Get item statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>count — the number of interactions recorded for this item.</p></li>
<li><p>user_count — the number of distinct users who have interacted with
or rated this item.</p></li>
<li><p>rating_count — the number of ratings for this item.  Only provided
if the dataset has explicit ratings; if there are repeated
ratings, this does <strong>not</strong> count superseded ratings.</p></li>
<li><p>mean_rating — the mean of the reatings. Only provided if the
dataset has explicit ratings.</p></li>
<li><p>first_time — the first time the item appears. Only provided if the
dataset has timestamps.</p></li>
</ul>
<p>The index is the vocabulary, so <code class="docutils literal notranslate"><span class="pre">iloc</span></code> works with item numbers.</p>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A data frame indexed by item ID with the following columns</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Dataset.user_stats">
<span class="sig-name descname"><span class="pre">user_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Dataset.user_stats" title="Link to this definition">#</a></dt>
<dd><p>Get user statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>count — the number of interactions recorded for this user.</p></li>
<li><p>item_count — the number of distinct items with which this user has
interacted.</p></li>
<li><p>rating_count — the number of ratings for this user.  Only provided
if the dataset has explicit ratings; if there are repeated
ratings, this does <strong>not</strong> count superseded ratings.</p></li>
<li><p>mean_rating — the mean of the user’s reatings. Only provided if
the dataset has explicit ratings.</p></li>
<li><p>first_time — the first time the user appears. Only provided if the
dataset has timestamps.</p></li>
<li><p>last_time — the last time the user appears. Only provided if the
dataset has timestamps.</p></li>
</ul>
<p>The index is the vocabulary, so <code class="docutils literal notranslate"><span class="pre">iloc</span></code> works with user numbers.</p>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>A data frame indexed by user ID with the following columns</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="creating-datasets">
<h2>Creating Datasets<a class="headerlink" href="#creating-datasets" title="Link to this heading">#</a></h2>
<p>Several functions can create a <a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> from different input data sources.</p>
<dl class="py function">
<dt class="sig sig-object py" id="lenskit.data.from_interactions_df">
<span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">from_interactions_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rating_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.from_interactions_df" title="Link to this definition">#</a></dt>
<dd><p>Create a dataset from a data frame of ratings or other user-item
interactions.</p>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Repeated interactions are not yet supported.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><em>DataFrame</em></a>) – The user-item interactions (e.g. ratings).  The dataset code takes
ownership of this data frame and may modify it.</p></li>
<li><p><strong>user_col</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – The name of the user ID column.  By default, looks for columns named
<code class="docutils literal notranslate"><span class="pre">user</span></code>, <code class="docutils literal notranslate"><span class="pre">user_id</span></code>, or <code class="docutils literal notranslate"><span class="pre">userId</span></code>, with several case variants.</p></li>
<li><p><strong>item_col</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – The name of the item ID column.  By default, looks for columns named
<code class="docutils literal notranslate"><span class="pre">item</span></code>, <code class="docutils literal notranslate"><span class="pre">item_id</span></code>, or <code class="docutils literal notranslate"><span class="pre">itemId</span></code>, with several case variants.</p></li>
<li><p><strong>rating_col</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – The name of the rating column.</p></li>
<li><p><strong>timestamp_col</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – The name of the timestamp column.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.dataset.Dataset"><em>Dataset</em></a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="loading-common-datasets">
<h2>Loading Common Datasets<a class="headerlink" href="#loading-common-datasets" title="Link to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="lenskit.data.load_movielens">
<span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">load_movielens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.load_movielens" title="Link to this definition">#</a></dt>
<dd><p>Load a MovieLens dataset.  The appropriate MovieLens format is detected
based on the file contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><em>Path</em></a>) – The path to the dataset, either as an unpacked directory or a zip
file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.dataset.Dataset"><em>Dataset</em></a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="vocabularies">
<h2>Vocabularies<a class="headerlink" href="#vocabularies" title="Link to this heading">#</a></h2>
<p>LensKit uses <em>vocabularies</em> to record user/item IDs, tags, terms, etc. in a way
that facilitates easy mapping to 0-based contiguous indexes for use in matrix
and tensor data structures.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">Vocabulary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Vocabulary" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Vocabularies of terms, tags, entity IDs, etc. for the LensKit data model.</p>
<p>This class supports bidirectional mappings between key-like data and
congiguous nonnegative integer indices.  Its key use is to facilitate the
user and item ID vocabularies in <a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a>, but it can
also be used for things like item tags.</p>
<p>It is currently a wrapper around <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="(in pandas v2.2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.Index</span></code></a>, but supports the
ability to add additional vocabulary terms after the vocabulary has been
created.  New terms do not change the index positions of previously-known
identifiers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>pd.Index</em><em> | </em><em>ArrayLike</em><em> | </em><em>Iterable</em><em>[</em><em>Hashable</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><a class="headerlink" href="#lenskit.data.Vocabulary.name" title="Link to this definition">#</a></dt>
<dd><p>The name of the vocabulary (e.g. “user”, “item”).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.index">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">index</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="(in pandas v2.2.2)"><span class="pre">Index</span></a></em><a class="headerlink" href="#lenskit.data.Vocabulary.index" title="Link to this definition">#</a></dt>
<dd><p>The property as a Pandas index.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></em><a class="headerlink" href="#lenskit.data.Vocabulary.size" title="Link to this definition">#</a></dt>
<dd><p>Current vocabulary size.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.number">
<span class="sig-name descname"><span class="pre">number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.12)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'error'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'error'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></span><a class="headerlink" href="#lenskit.data.Vocabulary.number" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.12)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'none'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span></dt>
<dd><p>Look up the number for a vocabulary term.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.numbers">
<span class="sig-name descname"><span class="pre">numbers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">terms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'error'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Vocabulary.numbers" title="Link to this definition">#</a></dt>
<dd><p>Look up the numbers for an array of terms or IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>terms</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.12)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Hashable" title="(in Python v3.12)"><em>Hashable</em></a><em>] </em><em>| </em><em>numpy.typing.ArrayLike</em>)</p></li>
<li><p><strong>missing</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.12)"><em>Literal</em></a><em>[</em><em>'error'</em><em>, </em><em>'negative'</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a>[<em>int32</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.term">
<span class="sig-name descname"><span class="pre">term</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Vocabulary.term" title="Link to this definition">#</a></dt>
<dd><p>Look up the term with a particular number.  Negative indexing is <strong>not</strong> supported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)">object</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.terms">
<span class="sig-name descname"><span class="pre">terms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nums</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Vocabulary.terms" title="Link to this definition">#</a></dt>
<dd><p>Get a list of terms, optionally for an array of term numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nums</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>] </em><em>| </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.integer" title="(in NumPy v2.0)"><em>integer</em></a><em>]</em><em>] </em><em>| </em><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.2.2)"><em>Series</em></a><em> | </em><em>None</em>) – The numbers (indices) for of terms to retrieve.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
returns all terms.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The terms corresponding to the specified numbers, or the full array
of terms (in order) if <code class="docutils literal notranslate"><span class="pre">nums=None</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a>[<a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.generic" title="(in NumPy v2.0)"><em>generic</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.id">
<span class="sig-name descname"><span class="pre">id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Vocabulary.id" title="Link to this definition">#</a></dt>
<dd><p>Alias for <a class="reference internal" href="#lenskit.data.Vocabulary.term" title="lenskit.data.Vocabulary.term"><code class="xref py py-meth docutils literal notranslate"><span class="pre">term()</span></code></a>  for greater readability for entity ID vocabularies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)">object</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.ids">
<span class="sig-name descname"><span class="pre">ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nums</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Vocabulary.ids" title="Link to this definition">#</a></dt>
<dd><p>Alias for <a class="reference internal" href="#lenskit.data.Vocabulary.terms" title="lenskit.data.Vocabulary.terms"><code class="xref py py-meth docutils literal notranslate"><span class="pre">terms()</span></code></a> for greater readability for entity ID vocabularies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nums</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>] </em><em>| </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a><em>[</em><a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.integer" title="(in NumPy v2.0)"><em>integer</em></a><em>]</em><em>] </em><em>| </em><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.2.2)"><em>Series</em></a><em> | </em><em>None</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a>[<a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.generic" title="(in NumPy v2.0)"><em>generic</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.Vocabulary.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.Vocabulary.copy" title="Link to this definition">#</a></dt>
<dd><p>Return a (cheap) copy of this vocabulary.  It retains the same mapping,
but will not be updated if the original vocabulary has new terms added.
However, since new terms are always added to the end, it will be
compatible with the original vocabulary for all terms recorded at the
time of the copy.</p>
<p>This method is useful for saving known vocabularies in model training.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.vocab.Vocabulary"><em>Vocabulary</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="user-and-item-data">
<h2>User and Item Data<a class="headerlink" href="#user-and-item-data" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="#module-lenskit.data" title="lenskit.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lenskit.data</span></code></a> package also provides various classes for representing
user and item data.</p>
<section id="user-profiles">
<h3>User Profiles<a class="headerlink" href="#user-profiles" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.UserProfile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">UserProfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">past_items</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.UserProfile" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lenskit.data.HasItemList" title="lenskit.data.items.HasItemList"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasItemList</span></code></a></p>
<p>Class representing a user’s “profile” — their ID, history, and any other
data known about them.  Data sources are encouraged to add additional fields
to user profile objects based on specific data needs so that aware
components can make use of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><em>bytes</em></a><em> | </em><em>None</em>) – The ID of the user profile to create.  Can also be a
<code class="docutils literal notranslate"><span class="pre">UserProfile</span></code>, in which case the new profile is initialized as a
shallow copy of the provided profile.  Other constructor arguments
override the source profile in this case (so you can e.g. create a
copy of a user with a different history).</p></li>
<li><p><strong>past_items</strong> (<a class="reference internal" href="#lenskit.data.ItemList" title="lenskit.data.items.ItemList"><em>ItemList</em></a><em> | </em><em>None</em>) – The user’s item history, without duplicates.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.UserProfile.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lenskit.data.UserProfile.id" title="Link to this definition">#</a></dt>
<dd><p>The user’s identifier.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This can be <code class="docutils literal notranslate"><span class="pre">None</span></code> to facilitate passing anonymous users and recommend
based only on their history.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.UserProfile.past_items">
<span class="sig-name descname"><span class="pre">past_items</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lenskit.data.ItemList" title="lenskit.data.items.ItemList"><span class="pre">ItemList</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lenskit.data.UserProfile.past_items" title="Link to this definition">#</a></dt>
<dd><p>The items the user has interacted with in the past.  Each item appears once,
as in <a class="reference internal" href="#lenskit.data.Dataset.interaction_matrix" title="lenskit.data.Dataset.interaction_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lenskit.data.Dataset.interaction_matrix()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.UserProfile.item_list">
<span class="sig-name descname"><span class="pre">item_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.UserProfile.item_list" title="Link to this definition">#</a></dt>
<dd><p>Return the item list.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.data.ItemList" title="lenskit.data.items.ItemList"><em>ItemList</em></a> | None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="item-lists">
<h3>Item Lists<a class="headerlink" href="#item-lists" title="Link to this heading">#</a></h3>
<p>LensKit uses <em>item lists</em> to represent collections of items that may be scored,
ranked, etc.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.ItemList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">ItemList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_nums</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vocabulary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ordered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">fields</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Representation of a (usually ordered) list of items, possibly with scores
and other associated data; many components take and return item lists.  Item
lists are to be treated as <strong>immutable</strong> — create a new list with modified
data, do not do in-place modifications of the list itself or the arrays or
data frame it returns.</p>
<p>An item list logically a list of rows, each of which is an item, like a
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> but supporting multiple array backends.</p>
<p>Item lists can be subset as an array (e.g. <code class="docutils literal notranslate"><span class="pre">items[selector]</span></code>), where
integer indices (or arrays thereof), boolean arrays, and slices are allowed
as selectors.</p>
<p>When an item list is pickled, it is pickled compactly but only for CPUs: the
vocabulary is dropped (after ensuring both IDs and numbers are computed),
and all arrays are pickled as NumPy arrays.  This makes item lists compact
to serialize and transmit, but does mean that that serializing an item list
whose scores are still on the GPU will deserialize on the CPU in the
receiving process.  This is usually not a problem, because item lists are
typically used for small lists of items, not large data structures that need
to remain in shared memory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Naming for fields and accessor methods is tricky, because the usual
convention for a data frame is to use singular column names (e.g.
“item_id”, “score”) instead of plural (“item_ids”, “scores”) — the data
frame, like a database table, is a list of instances, and the column
names are best interpreted as naming attributes of individual instances.</p>
<p>However, when working with a list of e.g. item IDs, it is more natural —
at least to this author — to use plural names: <code class="docutils literal notranslate"><span class="pre">item_ids</span></code>.  Since this
class is doing somewhat double-duty, representing a list of items along
with associated data, as well as a data frame of columns representing
items, the appropriate naming is not entirely clear.  The naming
convention in this class is therefore as follows:</p>
<ul class="simple">
<li><p>Field names are singular (<code class="docutils literal notranslate"><span class="pre">item_id</span></code>, <code class="docutils literal notranslate"><span class="pre">score</span></code>).</p></li>
<li><p>Named accessor methods are plural (<code class="xref py py-meth docutils literal notranslate"><span class="pre">item_ids()</span></code>, <a class="reference internal" href="#lenskit.data.ItemList.scores" title="lenskit.data.ItemList.scores"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scores()</span></code></a>).</p></li>
<li><p>Both singular and plural forms are accepted for item IDs numbers, and
scores in the keyword arguments.  Other field names should be
singular.</p></li>
</ul>
</div>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>Right now, selection / subsetting only happens on the CPU, and will move
data to the CPU for the subsetting operation.  There is no reason, in
principle, why we cannot subset on GPU.  Future revisions may add
support for this.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_ids</strong> (<em>NDArray</em><em>[</em><em>NPEntityId</em><em>] </em><em>| </em><em>pd.Series</em><em>[</em><em>EntityId</em><em>] </em><em>| </em><em>Sequence</em><em>[</em><em>EntityId</em><em>] </em><em>| </em><em>None</em>) – A list or array of item identifiers. <code class="docutils literal notranslate"><span class="pre">item_id</span></code> is accepted as an
alternate name.</p></li>
<li><p><strong>item_nums</strong> (<em>NDArray</em><em>[</em><em>np.int32</em><em>] </em><em>| </em><em>pd.Series</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>] </em><em>| </em><em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>] </em><em>| </em><em>ArrayLike</em><em> | </em><em>None</em>) – A list or array of item numbers. <code class="docutils literal notranslate"><span class="pre">item_num</span></code> is accepted as an
alternate name.</p></li>
<li><p><strong>vocabulary</strong> (<a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.Vocabulary"><em>Vocabulary</em></a><em> | </em><em>None</em>) – A vocabulary to translate between item IDs and numbers.</p></li>
<li><p><strong>ordered</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – Whether the list has a meaningful order.</p></li>
<li><p><strong>scores</strong> (<em>NDArray</em><em>[</em><em>np.generic</em><em>] </em><em>| </em><a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><em>torch.Tensor</em></a><em> | </em><em>ArrayLike</em><em> | </em><em>None</em>) – An array of scores for the items.</p></li>
<li><p><strong>fields</strong> (<em>NDArray</em><em>[</em><em>np.generic</em><em>] </em><em>| </em><a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><em>torch.Tensor</em></a><em> | </em><em>ArrayLike</em>) – Additional fields, such as <code class="docutils literal notranslate"><span class="pre">score</span></code> or <code class="docutils literal notranslate"><span class="pre">rating</span></code>.  Field names
should generally be singular; the named keyword arguments and
accessor methods are plural for readability (“get the list of item
IDs”)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.ItemList.ordered">
<span class="sig-name descname"><span class="pre">ordered</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></em><a class="headerlink" href="#lenskit.data.ItemList.ordered" title="Link to this definition">#</a></dt>
<dd><p>Whether this list has a meaningful order.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.from_df">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vocabulary=&lt;class</span> <span class="pre">'lenskit.data.vocab.Vocabulary'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_user=False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.from_df" title="Link to this definition">#</a></dt>
<dd><p>Create a item list from a Pandas data frame.  The frame should have
<code class="docutils literal notranslate"><span class="pre">item_num</span></code> and/or <code class="docutils literal notranslate"><span class="pre">item_id</span></code> columns to identify the items; other
columns (e.g. <code class="docutils literal notranslate"><span class="pre">score</span></code> or <code class="docutils literal notranslate"><span class="pre">rating</span></code>) are added as fields. If the data
frame has user columns (<code class="docutils literal notranslate"><span class="pre">user_id</span></code> or <code class="docutils literal notranslate"><span class="pre">user_num</span></code>), those are dropped
by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><em>DataFrame</em></a>) – The data frame to turn into an item list.</p></li>
<li><p><strong>vocabulary</strong> – The item vocabulary.</p></li>
<li><p><strong>keep_user</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, keeps user ID/number columns instead of dropping them.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#lenskit.data.ItemList" title="lenskit.data.items.ItemList"><em>ItemList</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.clone">
<span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.clone" title="Link to this definition">#</a></dt>
<dd><p>Make a shallow copy of the item list.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.data.ItemList" title="lenskit.data.items.ItemList"><em>ItemList</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.ids">
<span class="sig-name descname"><span class="pre">ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.ids" title="Link to this definition">#</a></dt>
<dd><p>Get the item IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An array of item identifiers.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.12)"><strong>RuntimeError</strong></a> – if the item list was not created with IDs or a <a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.Vocabulary"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocabulary</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a>[<a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.integer" title="(in NumPy v2.0)"><em>integer</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><em>Any</em></a>] | <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.str_" title="(in NumPy v2.0)"><em>str_</em></a> | <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.bytes_" title="(in NumPy v2.0)"><em>bytes_</em></a> | <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.object_" title="(in NumPy v2.0)"><em>object_</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.numbers">
<span class="sig-name descname"><span class="pre">numbers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'numpy'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vocabulary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.numbers" title="Link to this definition">#</a></dt>
<dd><p>Get the item numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.LiteralString" title="(in Python v3.12)"><em>LiteralString</em></a>) – The array format to use.</p></li>
<li><p><strong>vocabulary</strong> (<a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.vocab.Vocabulary"><em>Vocabulary</em></a><em> | </em><em>None</em>) – A alternate vocabulary for mapping IDs to numbers.  If provided,
then the item list must have IDs (either stored, or through a
vocabulary).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array of item numbers.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.12)"><strong>RuntimeError</strong></a> – if the item list was not created with numbers or a</p></li>
<li><p><a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.Vocabulary"><strong>Vocabulary</strong></a> – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy.typing.ArrayLike</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.scores">
<span class="sig-name descname"><span class="pre">scores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'numpy'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.scores" title="Link to this definition">#</a></dt>
<dd><p>Get the item scores (if available).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>format</strong> (<em>LiteralString</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>ArrayLike | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.ranks">
<span class="sig-name descname"><span class="pre">ranks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'numpy'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.ranks" title="Link to this definition">#</a></dt>
<dd><p>Get an array of ranks for the items in this list, if it is ordered.
Unordered lists have no ranks.  The ranks are based on the order in the
list, <strong>not</strong> on the score.</p>
<p>Item ranks start with <strong>1</strong>, for compatibility with common practice in
mathematically defining information retrieval metrics and operations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An array of item ranks, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if the list is unordered.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>format</strong> (<em>LiteralString</em>)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ArrayLike | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.to_df">
<span class="sig-name descname"><span class="pre">to_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.to_df" title="Link to this definition">#</a></dt>
<dd><p>Convert this item list to a Pandas data frame.  It has the following columns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">item_id</span></code> — the item IDs (if available and <code class="docutils literal notranslate"><span class="pre">ids=True</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item_num</span></code> — the item numbers (if available and <code class="docutils literal notranslate"><span class="pre">numbers=True</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">score</span></code> — the item scores</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rank</span></code> — the item ranks (if the list is ordered)</p></li>
<li><p>all other defined fields, using their field names</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>)</p></li>
<li><p><strong>numbers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><em>DataFrame</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.ItemList.item_list">
<span class="sig-name descname"><span class="pre">item_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.ItemList.item_list" title="Link to this definition">#</a></dt>
<dd><p>Implement the <a class="reference internal" href="#lenskit.data.HasItemList" title="lenskit.data.HasItemList"><code class="xref py py-class docutils literal notranslate"><span class="pre">HasItemList</span></code></a> protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Self" title="(in Python v3.12)"><em>Self</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.HasItemList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.</span></span><span class="sig-name descname"><span class="pre">HasItemList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.HasItemList" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></p>
<p>Protocol for types that expose an <a class="reference internal" href="#lenskit.data.ItemList" title="lenskit.data.ItemList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ItemList</span></code></a> (including the
<code class="docutils literal notranslate"><span class="pre">ItemList</span></code> class itself).</p>
<p>The primary use of this class is to annotate component inputs, so that e.g.
a component that works on a user’s history can take either a user history or
a raw <code class="docutils literal notranslate"><span class="pre">ItemList</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.HasItemList.item_list">
<span class="sig-name descname"><span class="pre">item_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.HasItemList.item_list" title="Link to this definition">#</a></dt>
<dd><p>Return the item list from this item, if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.data.ItemList" title="lenskit.data.items.ItemList"><em>ItemList</em></a> | None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="module-lenskit.data.tables">
<span id="user-item-data-tables"></span><h2>User-Item Data Tables<a class="headerlink" href="#module-lenskit.data.tables" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.tables.NumpyUserItemTable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.tables.</span></span><span class="sig-name descname"><span class="pre">NumpyUserItemTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.tables.NumpyUserItemTable" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Table of user-item interaction data represented as NumPy arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_nums</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a><em>[</em><em>int32</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>item_nums</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a><em>[</em><em>int32</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>ratings</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a><em>[</em><em>float32</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>timestamps</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><em>ndarray</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><em>dtype</em></a><em>[</em><em>int64</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.NumpyUserItemTable.user_nums">
<span class="sig-name descname"><span class="pre">user_nums</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><span class="pre">dtype</span></a><span class="p"><span class="pre">[</span></span><span class="pre">int32</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lenskit.data.tables.NumpyUserItemTable.user_nums" title="Link to this definition">#</a></dt>
<dd><p>User numbers (0-based contiguous integers, see <a class="reference internal" href="#data-identifiers"><span class="std std-ref">Identifiers</span></a>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.NumpyUserItemTable.item_nums">
<span class="sig-name descname"><span class="pre">item_nums</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><span class="pre">dtype</span></a><span class="p"><span class="pre">[</span></span><span class="pre">int32</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lenskit.data.tables.NumpyUserItemTable.item_nums" title="Link to this definition">#</a></dt>
<dd><p>Item numbers (0-based contiguous integers, see <a class="reference internal" href="#data-identifiers"><span class="std std-ref">Identifiers</span></a>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.NumpyUserItemTable.ratings">
<span class="sig-name descname"><span class="pre">ratings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><span class="pre">dtype</span></a><span class="p"><span class="pre">[</span></span><span class="pre">float32</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lenskit.data.tables.NumpyUserItemTable.ratings" title="Link to this definition">#</a></dt>
<dd><p>Ratings for the items.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.NumpyUserItemTable.timestamps">
<span class="sig-name descname"><span class="pre">timestamps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v2.0)"><span class="pre">dtype</span></a><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lenskit.data.tables.NumpyUserItemTable.timestamps" title="Link to this definition">#</a></dt>
<dd><p>Timestamps for recorded user-item interactions.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.tables.TorchUserItemTable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.tables.</span></span><span class="sig-name descname"><span class="pre">TorchUserItemTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_nums</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.tables.TorchUserItemTable" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Table of user-item interaction data represented as PyTorch tensors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_nums</strong> (<a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><em>Tensor</em></a>)</p></li>
<li><p><strong>item_nums</strong> (<a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><em>Tensor</em></a>)</p></li>
<li><p><strong>ratings</strong> (<a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><em>Tensor</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>timestamps</strong> (<a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><em>Tensor</em></a><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.TorchUserItemTable.user_nums">
<span class="sig-name descname"><span class="pre">user_nums</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><span class="pre">Tensor</span></a></em><a class="headerlink" href="#lenskit.data.tables.TorchUserItemTable.user_nums" title="Link to this definition">#</a></dt>
<dd><p>User numbers (0-based contiguous integers, see <a class="reference internal" href="#data-identifiers"><span class="std std-ref">Identifiers</span></a>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.TorchUserItemTable.item_nums">
<span class="sig-name descname"><span class="pre">item_nums</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><span class="pre">Tensor</span></a></em><a class="headerlink" href="#lenskit.data.tables.TorchUserItemTable.item_nums" title="Link to this definition">#</a></dt>
<dd><p>Item numbers (0-based contiguous integers, see <a class="reference internal" href="#data-identifiers"><span class="std std-ref">Identifiers</span></a>).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.TorchUserItemTable.ratings">
<span class="sig-name descname"><span class="pre">ratings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><span class="pre">Tensor</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lenskit.data.tables.TorchUserItemTable.ratings" title="Link to this definition">#</a></dt>
<dd><p>Ratings for the items.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="lenskit.data.tables.TorchUserItemTable.timestamps">
<span class="sig-name descname"><span class="pre">timestamps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" title="(in PyTorch v2.4)"><span class="pre">Tensor</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#lenskit.data.tables.TorchUserItemTable.timestamps" title="Link to this definition">#</a></dt>
<dd><p>Timestamps for recorded user-item interactions.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-lenskit.data.dataset">
<span id="dataset-implementations"></span><h2>Dataset Implementations<a class="headerlink" href="#module-lenskit.data.dataset" title="Link to this heading">#</a></h2>
<section id="matrix-dataset">
<h3>Matrix Dataset<a class="headerlink" href="#matrix-dataset" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="#lenskit.data.dataset.MatrixDataset" title="lenskit.data.dataset.MatrixDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatrixDataset</span></code></a> provides an in-memory dataset implementation backed
by a ratings matrix or implicit-feedback matrix.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.dataset.MatrixDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.dataset.</span></span><span class="sig-name descname"><span class="pre">MatrixDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">users</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interact_df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.dataset.MatrixDataset" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a></p>
<p>Dataset implementation using an in-memory rating or implicit-feedback matrix
(with no duplicate interactions).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Client code generally should not construct this class directly.  Instead
use the various <code class="docutils literal notranslate"><span class="pre">from_</span></code> and <code class="docutils literal notranslate"><span class="pre">load_</span></code> functions in
<a class="reference internal" href="#module-lenskit.data" title="lenskit.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lenskit.data</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>users</strong> (<a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.Vocabulary"><em>Vocabulary</em></a>)</p></li>
<li><p><strong>items</strong> (<a class="reference internal" href="#lenskit.data.Vocabulary" title="lenskit.data.Vocabulary"><em>Vocabulary</em></a>)</p></li>
<li><p><strong>interact_df</strong> (<em>pd.DataFrame</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="lazy-dataset">
<h3>Lazy Dataset<a class="headerlink" href="#lazy-dataset" title="Link to this heading">#</a></h3>
<p>The lazy data set takes a function that loads a data set (of any type), and
lazily uses that function to load an underlying data set when needed.</p>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.data.dataset.LazyDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.data.dataset.</span></span><span class="sig-name descname"><span class="pre">LazyDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loader</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.dataset.LazyDataset" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a></p>
<p>A data set with an underlying load function, that doesn’t call the function
until data is actually needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>loader</strong> (<em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.dataset.Dataset"><em>Dataset</em></a><em>]</em>) – The function that will load the dataset when needed.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="lenskit.data.dataset.LazyDataset.delegate">
<span class="sig-name descname"><span class="pre">delegate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.data.dataset.LazyDataset.delegate" title="Link to this definition">#</a></dt>
<dd><p>Get the delegate data set, loading it if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.data.Dataset" title="lenskit.data.dataset.Dataset"><em>Dataset</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="releases/2024.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">2024 Releases</p>
      </div>
    </a>
    <a class="right-next"
       href="splitting.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Splitting Data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-model-and-key-concepts">Data Model and Key Concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-identifiers">Identifiers</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.EntityId"><code class="docutils literal notranslate"><span class="pre">EntityId</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-abstraction">Dataset Abstraction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset"><code class="docutils literal notranslate"><span class="pre">Dataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.items"><code class="docutils literal notranslate"><span class="pre">Dataset.items</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.users"><code class="docutils literal notranslate"><span class="pre">Dataset.users</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.count"><code class="docutils literal notranslate"><span class="pre">Dataset.count()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.interaction_count"><code class="docutils literal notranslate"><span class="pre">Dataset.interaction_count</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.rating_count"><code class="docutils literal notranslate"><span class="pre">Dataset.rating_count</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.interaction_log"><code class="docutils literal notranslate"><span class="pre">Dataset.interaction_log()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.interaction_matrix"><code class="docutils literal notranslate"><span class="pre">Dataset.interaction_matrix()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.user_profile"><code class="docutils literal notranslate"><span class="pre">Dataset.user_profile()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.item_stats"><code class="docutils literal notranslate"><span class="pre">Dataset.item_stats()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Dataset.user_stats"><code class="docutils literal notranslate"><span class="pre">Dataset.user_stats()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-datasets">Creating Datasets</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.from_interactions_df"><code class="docutils literal notranslate"><span class="pre">from_interactions_df()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-common-datasets">Loading Common Datasets</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.load_movielens"><code class="docutils literal notranslate"><span class="pre">load_movielens()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vocabularies">Vocabularies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary"><code class="docutils literal notranslate"><span class="pre">Vocabulary</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.name"><code class="docutils literal notranslate"><span class="pre">Vocabulary.name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.index"><code class="docutils literal notranslate"><span class="pre">Vocabulary.index</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.size"><code class="docutils literal notranslate"><span class="pre">Vocabulary.size</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.number"><code class="docutils literal notranslate"><span class="pre">Vocabulary.number()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.numbers"><code class="docutils literal notranslate"><span class="pre">Vocabulary.numbers()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.term"><code class="docutils literal notranslate"><span class="pre">Vocabulary.term()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.terms"><code class="docutils literal notranslate"><span class="pre">Vocabulary.terms()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.id"><code class="docutils literal notranslate"><span class="pre">Vocabulary.id()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.ids"><code class="docutils literal notranslate"><span class="pre">Vocabulary.ids()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.Vocabulary.copy"><code class="docutils literal notranslate"><span class="pre">Vocabulary.copy()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user-and-item-data">User and Item Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#user-profiles">User Profiles</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile"><code class="docutils literal notranslate"><span class="pre">UserProfile</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile.id"><code class="docutils literal notranslate"><span class="pre">UserProfile.id</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile.past_items"><code class="docutils literal notranslate"><span class="pre">UserProfile.past_items</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.UserProfile.item_list"><code class="docutils literal notranslate"><span class="pre">UserProfile.item_list()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#item-lists">Item Lists</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList"><code class="docutils literal notranslate"><span class="pre">ItemList</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.ordered"><code class="docutils literal notranslate"><span class="pre">ItemList.ordered</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.from_df"><code class="docutils literal notranslate"><span class="pre">ItemList.from_df()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.clone"><code class="docutils literal notranslate"><span class="pre">ItemList.clone()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.ids"><code class="docutils literal notranslate"><span class="pre">ItemList.ids()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.numbers"><code class="docutils literal notranslate"><span class="pre">ItemList.numbers()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.scores"><code class="docutils literal notranslate"><span class="pre">ItemList.scores()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.ranks"><code class="docutils literal notranslate"><span class="pre">ItemList.ranks()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.to_df"><code class="docutils literal notranslate"><span class="pre">ItemList.to_df()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.ItemList.item_list"><code class="docutils literal notranslate"><span class="pre">ItemList.item_list()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.HasItemList"><code class="docutils literal notranslate"><span class="pre">HasItemList</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.HasItemList.item_list"><code class="docutils literal notranslate"><span class="pre">HasItemList.item_list()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-lenskit.data.tables">User-Item Data Tables</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.user_nums"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.user_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.item_nums"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.item_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.ratings"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.ratings</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.NumpyUserItemTable.timestamps"><code class="docutils literal notranslate"><span class="pre">NumpyUserItemTable.timestamps</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.user_nums"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.user_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.item_nums"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.item_nums</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.ratings"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.ratings</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.tables.TorchUserItemTable.timestamps"><code class="docutils literal notranslate"><span class="pre">TorchUserItemTable.timestamps</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-lenskit.data.dataset">Dataset Implementations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matrix-dataset">Matrix Dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.dataset.MatrixDataset"><code class="docutils literal notranslate"><span class="pre">MatrixDataset</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lazy-dataset">Lazy Dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.dataset.LazyDataset"><code class="docutils literal notranslate"><span class="pre">LazyDataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.data.dataset.LazyDataset.delegate"><code class="docutils literal notranslate"><span class="pre">LazyDataset.delegate()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Michael D. Ekstrand
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2018–2024 Drexel University, Boise State University, and collaborators.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>