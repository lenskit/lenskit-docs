
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="lenskit.pipeline.Pipeline" />
<meta property="og:type" content="website" />
<meta property="og:url" content="api/lenskit.pipeline.Pipeline.html" />
<meta property="og:site_name" content="LensKit" />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="/_images/social_previews/summary_api_lenskit.pipeline.Pipeline_73bb9c27.png" />
<meta property="og:image:alt" content="" />
<meta name="twitter:card" content="summary_large_image" />

    <title>lenskit.pipeline.Pipeline &#8212; LensKit 2025.0.0a4.dev11+g42a06c82 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=19a5d3c0" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=00ccedf9"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/lenskit.pipeline.Pipeline';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.0';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://lkpy.lenskit.org/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2024.0dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="canonical" href="https://lkpy.lenskit.org/en/latest/api/lenskit.pipeline.Pipeline.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="lenskit.pipeline.PipelineState" href="lenskit.pipeline.PipelineState.html" />
    <link rel="prev" title="Pipeline API" href="pipeline.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2025.0.0a4" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/LKLogo2.png" class="logo__image only-light" alt="LensKit 2025.0.0a4.dev11+g42a06c82 documentation - Home"/>
    <img src="../_static/LKLogo2.png" class="logo__image only-dark pst-js-only" alt="LensKit 2025.0.0a4.dev11+g42a06c82 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../guide/index.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../releases/index.html">
    Release Notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../catalogs.html">
    Indices
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/lenskit/lkpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://recsys.social/@LensKit" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../guide/index.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../releases/index.html">
    Release Notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../catalogs.html">
    Indices
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/lenskit/lkpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://recsys.social/@LensKit" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Core</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="data.html">Data Abstractions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="data-types.html">Basic Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.Dataset.html">lenskit.data.Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.from_interactions_df.html">lenskit.data.from_interactions_df</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.load_movielens.html">lenskit.data.load_movielens</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.load_movielens_df.html">lenskit.data.load_movielens_df</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.ItemList.html">lenskit.data.ItemList</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.ItemListCollection.html">lenskit.data.ItemListCollection</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.UserIDKey.html">lenskit.data.UserIDKey</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.GenericKey.html">lenskit.data.GenericKey</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.RecQuery.html">lenskit.data.RecQuery</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.QueryInput.html">lenskit.data.QueryInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.data.Vocabulary.html">lenskit.data.Vocabulary</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="pipeline.html">Pipeline API</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">lenskit.pipeline.Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.PipelineState.html">lenskit.pipeline.PipelineState</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.Node.html">lenskit.pipeline.Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.Lazy.html">lenskit.pipeline.Lazy</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.Component.html">lenskit.pipeline.Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.Trainable.html">lenskit.pipeline.Trainable</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.Configurable.html">lenskit.pipeline.Configurable</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.RecPipelineBuilder.html">lenskit.pipeline.RecPipelineBuilder</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.topn_pipeline.html">lenskit.pipeline.topn_pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.pipeline.PipelineConfig.html">lenskit.pipeline.PipelineConfig</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">Operation Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics.html">Diagnostic APIs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Components</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="lenskit.basic.html">lenskit.basic</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.basic.bias.html">lenskit.basic.bias</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.basic.candidates.html">lenskit.basic.candidates</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.basic.composite.html">lenskit.basic.composite</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.basic.history.html">lenskit.basic.history</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.basic.popularity.html">lenskit.basic.popularity</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.basic.random.html">lenskit.basic.random</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.basic.topn.html">lenskit.basic.topn</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lenskit.knn.html">lenskit.knn</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.knn.item.html">lenskit.knn.item</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.knn.user.html">lenskit.knn.user</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="lenskit.als.html">lenskit.als</a></li>
<li class="toctree-l1"><a class="reference internal" href="lenskit.funksvd.html">lenskit.funksvd</a></li>
<li class="toctree-l1"><a class="reference internal" href="lenskit.implicit.html">lenskit.implicit</a></li>
<li class="toctree-l1"><a class="reference internal" href="lenskit.hpf.html">lenskit.hpf</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Evaluation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="batch.html">Batch Operations</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.batch.BatchPipelineRunner.html">lenskit.batch.BatchPipelineRunner</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.batch.BatchResults.html">lenskit.batch.BatchResults</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.batch.predict.html">lenskit.batch.predict</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.batch.recommend.html">lenskit.batch.recommend</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.batch.InvocationSpec.html">lenskit.batch.InvocationSpec</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="metrics.html">Metrics and Analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.Metric.html">lenskit.metrics.Metric</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.ListMetric.html">lenskit.metrics.ListMetric</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.GlobalMetric.html">lenskit.metrics.GlobalMetric</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.MetricFunction.html">lenskit.metrics.MetricFunction</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.RankingMetricBase.html">lenskit.metrics.RankingMetricBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.RunAnalysis.html">lenskit.metrics.RunAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.RunAnalysisResult.html">lenskit.metrics.RunAnalysisResult</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.NDCG.html">lenskit.metrics.NDCG</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.RBP.html">lenskit.metrics.RBP</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.Precision.html">lenskit.metrics.Precision</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.Recall.html">lenskit.metrics.Recall</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.RecipRank.html">lenskit.metrics.RecipRank</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.RMSE.html">lenskit.metrics.RMSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.metrics.MAE.html">lenskit.metrics.MAE</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="splitting.html">Data Splitting</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.TTSplit.html">lenskit.splitting.TTSplit</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.split_global_time.html">lenskit.splitting.split_global_time</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.crossfold_users.html">lenskit.splitting.crossfold_users</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.sample_users.html">lenskit.splitting.sample_users</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.LastFrac.html">lenskit.splitting.LastFrac</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.LastN.html">lenskit.splitting.LastN</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.SampleFrac.html">lenskit.splitting.SampleFrac</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.SampleN.html">lenskit.splitting.SampleN</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.crossfold_records.html">lenskit.splitting.crossfold_records</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.splitting.sample_records.html">lenskit.splitting.sample_records</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Implementation Helpers</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="lenskit.stats.html">lenskit.stats</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lenskit.logging.html">lenskit.logging</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.config.html">lenskit.logging.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.monitor.html">lenskit.logging.monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.processors.html">lenskit.logging.processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.progress.html">lenskit.logging.progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.resource.html">lenskit.logging.resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.tasks.html">lenskit.logging.tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.tracing.html">lenskit.logging.tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.logging.worker.html">lenskit.logging.worker</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lenskit.math.html">lenskit.math</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.math.solve.html">lenskit.math.solve</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.math.sparse.html">lenskit.math.sparse</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lenskit.parallel.html">lenskit.parallel</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.parallel.chunking.html">lenskit.parallel.chunking</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.parallel.config.html">lenskit.parallel.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.parallel.invoker.html">lenskit.parallel.invoker</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.parallel.pool.html">lenskit.parallel.pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.parallel.sequential.html">lenskit.parallel.sequential</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.parallel.serialize.html">lenskit.parallel.serialize</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.parallel.worker.html">lenskit.parallel.worker</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lenskit.util.html">lenskit.util</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="lenskit.util.envcheck.html">lenskit.util.envcheck</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.util.random.html">lenskit.util.random</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.util.timing.html">lenskit.util.timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="lenskit.util.torch.html">lenskit.util.torch</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">API Reference</a></li>
    
    
    <li class="breadcrumb-item"><a href="pipeline.html" class="nav-link">Pipeline API</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">lenskit.pipeline.Pipeline</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="lenskit-pipeline-pipeline">
<h1>lenskit.pipeline.Pipeline<a class="headerlink" href="#lenskit-pipeline-pipeline" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">lenskit.pipeline.</span></span><span class="sig-name descname"><span class="pre">Pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>LensKit recommendation pipeline.  This is the core abstraction for using
LensKit models and other components to produce recommendations in a useful
way.  It allows you to wire together components in (mostly) abitrary graphs,
train them on data, and serialize pipelines to disk for use elsewhere.</p>
<p>If you have a scoring model and just want to generate recommenations with a
default setup and minimal configuration, see <a class="reference internal" href="lenskit.pipeline.topn_pipeline.html#lenskit.pipeline.topn_pipeline" title="lenskit.pipeline.topn_pipeline"><code class="xref py py-func docutils literal notranslate"><span class="pre">topn_pipeline()</span></code></a>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – A name for the pipeline.</p></li>
<li><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – A numeric version for the pipeline.</p></li>
</ul>
</dd>
<dt class="field-even">Stability<span class="colon">:</span></dt>
<dd class="field-even">Caller (see <span><a class="reference internal" href="../releases/index.html#stability-levels"><span class="std std-ref">Stability Levels</span></a></span>).</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.__init__" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.__init__" title="lenskit.pipeline.Pipeline.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>([name, version])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.add_component" title="lenskit.pipeline.Pipeline.add_component"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_component</span></code></a>(name, obj, **inputs)</p></td>
<td><p>Add a component and connect it into the graph.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.alias" title="lenskit.pipeline.Pipeline.alias"><code class="xref py py-obj docutils literal notranslate"><span class="pre">alias</span></code></a>(alias, node)</p></td>
<td><p>Create an alias for a node.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.clone" title="lenskit.pipeline.Pipeline.clone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clone</span></code></a>([how])</p></td>
<td><p>Clone the pipeline, optionally including trained parameters.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.component_configs" title="lenskit.pipeline.Pipeline.component_configs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">component_configs</span></code></a>()</p></td>
<td><p>Get the configurations for the components.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.config_hash" title="lenskit.pipeline.Pipeline.config_hash"><code class="xref py py-obj docutils literal notranslate"><span class="pre">config_hash</span></code></a>()</p></td>
<td><p>Get a hash of the pipeline's configuration to uniquely identify it for logging, version control, or other purposes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.connect" title="lenskit.pipeline.Pipeline.connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect</span></code></a>(obj, **inputs)</p></td>
<td><p>Provide additional input connections for a component that has already been added.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.create_input" title="lenskit.pipeline.Pipeline.create_input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_input</span></code></a>(name, *types)</p></td>
<td><p>Create an input node for the pipeline.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.from_config" title="lenskit.pipeline.Pipeline.from_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_config</span></code></a>(config)</p></td>
<td><p>Reconstruct a pipeline from a serialized configuration.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.get_config" title="lenskit.pipeline.Pipeline.get_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_config</span></code></a>(*[, include_hash])</p></td>
<td><p>Get this pipeline's configuration for serialization.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.get_default" title="lenskit.pipeline.Pipeline.get_default"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_default</span></code></a>(name)</p></td>
<td><p>Get the default wiring for an input name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.literal" title="lenskit.pipeline.Pipeline.literal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">literal</span></code></a>(value, *[, name])</p></td>
<td><p>Create a literal node (a node with a fixed value).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.meta" title="lenskit.pipeline.Pipeline.meta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meta</span></code></a>(*[, include_hash])</p></td>
<td><p>Get the metadata (name, version, hash, etc.) for this pipeline without returning the whole config.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.node" title="lenskit.pipeline.Pipeline.node"><code class="xref py py-obj docutils literal notranslate"><span class="pre">node</span></code></a>(node, *[, missing])</p></td>
<td><p>Get the pipeline node with the specified name.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.replace_component" title="lenskit.pipeline.Pipeline.replace_component"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replace_component</span></code></a>(name, obj, **inputs)</p></td>
<td><p>Replace a component in the graph.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.run" title="lenskit.pipeline.Pipeline.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>(*nodes, **kwargs)</p></td>
<td><p>Run the pipeline and obtain the return value(s) of one or more of its components.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.run_all" title="lenskit.pipeline.Pipeline.run_all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_all</span></code></a>(*nodes, **kwargs)</p></td>
<td><p>Run all nodes in the pipeline, or all nodes required to fulfill the requested node, and return a mapping with the full pipeline state (the data attached to each node).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.set_default" title="lenskit.pipeline.Pipeline.set_default"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_default</span></code></a>(name, node)</p></td>
<td><p>Set the default wiring for a component input.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.train" title="lenskit.pipeline.Pipeline.train"><code class="xref py py-obj docutils literal notranslate"><span class="pre">train</span></code></a>(data, *[, retrain])</p></td>
<td><p>Trains the pipeline's trainable components (those implementing the <code class="xref py py-class docutils literal notranslate"><span class="pre">TrainableComponent</span></code> interface) on some training data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.use_first_of" title="lenskit.pipeline.Pipeline.use_first_of"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_first_of</span></code></a>(name, primary, fallback)</p></td>
<td><p>Ergonomic method to create a new node that returns the result of its <code class="docutils literal notranslate"><span class="pre">input</span></code> if it is provided and not <code class="docutils literal notranslate"><span class="pre">None</span></code>, and otherwise returns the result of <code class="docutils literal notranslate"><span class="pre">fallback</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Attributes</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#lenskit.pipeline.Pipeline.nodes" title="lenskit.pipeline.Pipeline.nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nodes</span></code></a></p></td>
<td><p>Get the nodes in the pipeline graph.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.meta">
<span class="sig-name descname"><span class="pre">meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.meta" title="Link to this definition">#</a></dt>
<dd><p>Get the metadata (name, version, hash, etc.) for this pipeline without
returning the whole config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>include_hash</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to include a configuration hash in the metadata.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>PipelineMeta</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.nodes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">nodes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><span class="pre">Node</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#lenskit.pipeline.Pipeline.nodes" title="Link to this definition">#</a></dt>
<dd><p>Get the nodes in the pipeline graph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.node">
<span class="sig-name descname"><span class="pre">node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'error'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.node" title="Link to this definition">#</a></dt>
<dd><p>Get the pipeline node with the specified name.  If passed a node, it
returns the node or fails if the node is not a member of the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>]</em>) – The name of the pipeline node to look up, or a node to check for
membership.</p></li>
<li><p><strong>missing</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><em>Literal</em></a><em>[</em><em>'error'</em><em>, </em><em>'none'</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The pipeline node, if it exists.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.13)"><strong>KeyError</strong></a> – The specified node does not exist.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)">object</a>] | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.create_input">
<span class="sig-name descname"><span class="pre">create_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">types</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.create_input" title="Link to this definition">#</a></dt>
<dd><p>Create an input node for the pipeline.  Pipelines expect their inputs to
be provided when they are run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the input.  The name must be unique in the pipeline
(among both components and inputs).</p></li>
<li><p><strong>types</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><em>type</em></a><em>[</em><em>T</em><em>] </em><em>| </em><em>None</em>) – The allowable types of the input; input data can be of any
specified type.  If <code class="docutils literal notranslate"><span class="pre">None</span></code> is among the allowed types, the
input can be omitted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A pipeline node representing this input.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – a node with the specified <code class="docutils literal notranslate"><span class="pre">name</span></code> already exists.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a>[<em>T</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.literal">
<span class="sig-name descname"><span class="pre">literal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.literal" title="Link to this definition">#</a></dt>
<dd><p>Create a literal node (a node with a fixed value).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Literal nodes cannot be serialized witih <a class="reference internal" href="#lenskit.pipeline.Pipeline.get_config" title="lenskit.pipeline.Pipeline.get_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_config()</span></code></a> or
<code class="xref py py-meth docutils literal notranslate"><span class="pre">save_config()</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>T</em>)</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>LiteralNode</em>[<em>T</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.set_default">
<span class="sig-name descname"><span class="pre">set_default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.set_default" title="Link to this definition">#</a></dt>
<dd><p>Set the default wiring for a component input.  Components that declare
an input parameter with the specified <code class="docutils literal notranslate"><span class="pre">name</span></code> but no configured input
will be wired to this node.</p>
<p>This is intended to be used for things like wiring up <cite>user</cite> parameters
to semi-automatically receive the target user’s identity and history.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the parameter to set a default for.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The node or literal value to wire to this parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.get_default">
<span class="sig-name descname"><span class="pre">get_default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.get_default" title="Link to this definition">#</a></dt>
<dd><p>Get the default wiring for an input name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a>] | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.alias">
<span class="sig-name descname"><span class="pre">alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alias</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.alias" title="Link to this definition">#</a></dt>
<dd><p>Create an alias for a node.  After aliasing, the node can be retrieved
from <a class="reference internal" href="#lenskit.pipeline.Pipeline.node" title="lenskit.pipeline.Pipeline.node"><code class="xref py py-meth docutils literal notranslate"><span class="pre">node()</span></code></a> using either its original name or its alias.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alias</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The alias to add to the node.</p></li>
<li><p><strong>node</strong> (<a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The node (or node name) to alias.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – if the alias is already used as an alias or node name.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.add_component">
<span class="sig-name descname"><span class="pre">add_component</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.add_component" title="Link to this definition">#</a></dt>
<dd><p>Add a component and connect it into the graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the component in the pipeline.  The name must be
unique in the pipeline (among both components and inputs).</p></li>
<li><p><strong>obj</strong> (<a class="reference internal" href="lenskit.pipeline.Component.html#lenskit.pipeline.Component" title="lenskit.pipeline.components.Component"><em>Component</em></a><em>[</em><em>ND</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><em>Callable</em></a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><em>ND</em><em>]</em>) – The component itself.</p></li>
<li><p><strong>inputs</strong> (<a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The component’s input wiring.  See <a class="reference internal" href="../guide/pipeline.html#pipeline-connections"><span class="std std-ref">Connections</span></a>
for details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The node representing this component in the pipeline.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a>[<em>ND</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.replace_component">
<span class="sig-name descname"><span class="pre">replace_component</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.replace_component" title="Link to this definition">#</a></dt>
<dd><p>Replace a component in the graph.  The new component must have a type
that is compatible with the old component.  The old component’s input
connections will be replaced (as the new component may have different
inputs), but any connections that use the old component to supply an
input will use the new component instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><em>ND</em><em>]</em>)</p></li>
<li><p><strong>obj</strong> (<a class="reference internal" href="lenskit.pipeline.Component.html#lenskit.pipeline.Component" title="lenskit.pipeline.components.Component"><em>Component</em></a><em>[</em><em>ND</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.13)"><em>Callable</em></a><em>[</em><em>[</em><em>...</em><em>]</em><em>, </em><em>ND</em><em>]</em>)</p></li>
<li><p><strong>inputs</strong> (<a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a>[<em>ND</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.connect" title="Link to this definition">#</a></dt>
<dd><p>Provide additional input connections for a component that has already
been added.  See <a class="reference internal" href="../guide/pipeline.html#pipeline-connections"><span class="std std-ref">Connections</span></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>]</em>) – The name or node of the component to wire.</p></li>
<li><p><strong>inputs</strong> (<a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The component’s input wiring.  For each keyword argument in the
component’s function signature, that argument can be provided
here with an input that the pipeline will provide to that
argument of the component when the pipeline is run.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.component_configs">
<span class="sig-name descname"><span class="pre">component_configs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.component_configs" title="Link to this definition">#</a></dt>
<dd><p>Get the configurations for the components.  This is the configurations
only, it does not include pipeline inputs or wiring.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.clone">
<span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">how</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'config'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.clone" title="Link to this definition">#</a></dt>
<dd><p>Clone the pipeline, optionally including trained parameters.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">how</span></code> parameter controls how the pipeline is cloned, and what is
available in the clone pipeline.  It can be one of the following values:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">&quot;config&quot;</span></code></dt><dd><p>Create fresh component instances using the configurations of the
components in this pipeline.  When applied to a trained pipeline,
the clone does <strong>not</strong> have the original’s learned parameters. This
is the default clone method.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;pipeline-config&quot;</span></code></dt><dd><p>Round-trip the entire pipeline through <a class="reference internal" href="#lenskit.pipeline.Pipeline.get_config" title="lenskit.pipeline.Pipeline.get_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_config()</span></code></a> and
<a class="reference internal" href="#lenskit.pipeline.Pipeline.from_config" title="lenskit.pipeline.Pipeline.from_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_config()</span></code></a>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>how</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><em>Literal</em></a><em>[</em><em>'config'</em><em>, </em><em>'pipeline-config'</em><em>]</em>) – The mechanism to use for cloning the pipeline.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new pipeline with the same components and wiring, but fresh
instances created by round-tripping the configuration.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#lenskit.pipeline.Pipeline" title="lenskit.pipeline._impl.Pipeline"><em>Pipeline</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.get_config">
<span class="sig-name descname"><span class="pre">get_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.get_config" title="Link to this definition">#</a></dt>
<dd><p>Get this pipeline’s configuration for serialization.  The configuration
consists of all inputs and components along with their configurations
and input connections.  It can be serialized to disk (in JSON, YAML, or
a similar format) to save a pipeline.</p>
<p>The configuration does <strong>not</strong> include any trained parameter values,
although the configuration may include things such as paths to
checkpoints to load such parameters, depending on the design of the
components in the pipeline.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Literal nodes (from <a class="reference internal" href="#lenskit.pipeline.Pipeline.literal" title="lenskit.pipeline.Pipeline.literal"><code class="xref py py-meth docutils literal notranslate"><span class="pre">literal()</span></code></a>, or literal values wired to
inputs) cannot be serialized, and this method will fail if they
are present in the pipeline.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>include_hash</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="lenskit.pipeline.PipelineConfig.html#lenskit.pipeline.PipelineConfig" title="lenskit.pipeline.config.PipelineConfig"><em>PipelineConfig</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.config_hash">
<span class="sig-name descname"><span class="pre">config_hash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.config_hash" title="Link to this definition">#</a></dt>
<dd><p>Get a hash of the pipeline’s configuration to uniquely identify it for
logging, version control, or other purposes.</p>
<p>The hash format and algorithm are not guaranteed, but is stable within a
LensKit version.  For the same version of LensKit and component code,
the same configuration will produce the same hash, so long as there are
no literal nodes.  Literal nodes will <em>usually</em> hash consistently, but
since literals other than basic JSON values are hashed by pickling, hash
stability depends on the stability of the pickle bytestream.</p>
<p>In LensKit 2025.1, the configuration hash is computed by computing the
JSON serialization of the pipeline configuration <em>without</em> a hash and
returning the hex-encoded SHA256 hash of that configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.from_config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.from_config" title="Link to this definition">#</a></dt>
<dd><p>Reconstruct a pipeline from a serialized configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The configuration object, as loaded from JSON, TOML, YAML, or
similar. Will be validated into a <a class="reference internal" href="lenskit.pipeline.PipelineConfig.html#lenskit.pipeline.PipelineConfig" title="lenskit.pipeline.PipelineConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineConfig</span></code></a>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The configured (but not trained) pipeline.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>PipelineError</strong> – If there is a configuration error reconstructing the pipeline.</p>
</dd>
<dt class="field-even">Warns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>PipelineWarning</strong> – If the configuration is funny but usable; for example, the
configuration includes a hash but the constructed pipeline does
not have a matching hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Self" title="(in Python v3.13)"><em>Self</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.train" title="Link to this definition">#</a></dt>
<dd><p>Trains the pipeline’s trainable components (those implementing the
<code class="xref py py-class docutils literal notranslate"><span class="pre">TrainableComponent</span></code> interface) on some training data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="lenskit.data.Dataset.html#lenskit.data.Dataset" title="lenskit.data.dataset.Dataset"><em>Dataset</em></a>) – The dataset to train on.</p></li>
<li><p><strong>retrain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to re-train components that have already been trained.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.run" title="Link to this definition">#</a></dt>
<dd><p>Run the pipeline and obtain the return value(s) of one or more of its
components.  See <a class="reference internal" href="../guide/pipeline.html#pipeline-execution"><span class="std std-ref">Execution</span></a> for details of the pipeline
execution model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>]</em>) – The component(s) to run.</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The pipeline’s inputs, as defined with <a class="reference internal" href="#lenskit.pipeline.Pipeline.create_input" title="lenskit.pipeline.Pipeline.create_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_input()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The pipeline result.  If zero or one nodes are specified, the result
is returned as-is. If multiple nodes are specified, their results
are returned in a tuple.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>PipelineError</strong> – when there is a pipeline configuration error (e.g. a cycle).</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – when one or more required inputs are missing.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><strong>TypeError</strong></a> – when one or more required inputs has an incompatible type.</p></li>
<li><p><strong>other</strong> – exceptions thrown by components are passed through.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)">object</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.run_all">
<span class="sig-name descname"><span class="pre">run_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.run_all" title="Link to this definition">#</a></dt>
<dd><p>Run all nodes in the pipeline, or all nodes required to fulfill the
requested node, and return a mapping with the full pipeline state (the
data attached to each node). This is useful in cases where client code
needs to be able to inspect the data at arbitrary steps of the pipeline.
It differs from <a class="reference internal" href="#lenskit.pipeline.Pipeline.run" title="lenskit.pipeline.Pipeline.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> in two ways:</p>
<ol class="arabic simple">
<li><p>It returns the data from all nodes as a mapping (dictionary-like
object), not just the specified nodes as a tuple.</p></li>
<li><p>If no nodes are specified, it runs <em>all</em> nodes instead of only the
last node.  This has the consequence of running nodes that are not
required to fulfill the last node (such scenarios typically result
from using <a class="reference internal" href="#lenskit.pipeline.Pipeline.use_first_of" title="lenskit.pipeline.Pipeline.use_first_of"><code class="xref py py-meth docutils literal notranslate"><span class="pre">use_first_of()</span></code></a>).</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><em>Any</em></a><em>]</em>) – The nodes to run, as positional arguments (if no nodes are
specified, this method runs all nodes).</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><em>object</em></a>) – The inputs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The full pipeline state, with <a class="reference internal" href="lenskit.pipeline.PipelineState.html#lenskit.pipeline.PipelineState.default" title="lenskit.pipeline.PipelineState.default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default</span></code></a> set to
the last node specified (either the last node in <cite>nodes</cite>, or the
last node added to the pipeline).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="lenskit.pipeline.PipelineState.html#lenskit.pipeline.PipelineState" title="lenskit.pipeline.state.PipelineState"><em>PipelineState</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="lenskit.pipeline.Pipeline.use_first_of">
<span class="sig-name descname"><span class="pre">use_first_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fallback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lenskit.pipeline.Pipeline.use_first_of" title="Link to this definition">#</a></dt>
<dd><p>Ergonomic method to create a new node that returns the result of its
<code class="docutils literal notranslate"><span class="pre">input</span></code> if it is provided and not <code class="docutils literal notranslate"><span class="pre">None</span></code>, and otherwise returns the
result of <code class="docutils literal notranslate"><span class="pre">fallback</span></code>.  This method is used for things like filling in
optional pipeline inputs.  For example, if you want the pipeline to take
candidate items through an <code class="docutils literal notranslate"><span class="pre">items</span></code> input, but look them up from the
user’s history and the training data if <code class="docutils literal notranslate"><span class="pre">items</span></code> is not supplied, you
would do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">()</span>
<span class="c1"># allow candidate items to be optionally specified</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">create_input</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">EntityId</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
<span class="c1"># find candidates from the training data (optional)</span>
<span class="n">lookup_candidates</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
    <span class="s1">&#39;select-candidates&#39;</span><span class="p">,</span> <span class="n">UnratedTrainingItemsCandidateSelector</span><span class="p">(),</span>
    <span class="n">user</span><span class="o">=</span><span class="n">history</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># if the client provided items as a pipeline input, use those; otherwise</span>
<span class="c1"># use the candidate selector we just configured.</span>
<span class="n">candidates</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">use_first_of</span><span class="p">(</span><span class="s1">&#39;candidates&#39;</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">lookup_candidates</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method does not distinguish between an input being unspecified
and explicitly specified as <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method does <em>not</em> implement item-level fallbacks, only
fallbacks at the level of entire results.  For item-level score
fallbacks, see <a class="reference internal" href="lenskit.basic.html#lenskit.basic.FallbackScorer" title="lenskit.basic.FallbackScorer"><code class="xref py py-class docutils literal notranslate"><span class="pre">FallbackScorer</span></code></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If one of the fallback elements is a component <code class="docutils literal notranslate"><span class="pre">A</span></code> that depends on
another component or input <code class="docutils literal notranslate"><span class="pre">B</span></code>, and <code class="docutils literal notranslate"><span class="pre">B</span></code> is missing or returns
<code class="docutils literal notranslate"><span class="pre">None</span></code> such that <code class="docutils literal notranslate"><span class="pre">A</span></code> would usually fail, then <code class="docutils literal notranslate"><span class="pre">A</span></code> will be
skipped and the fallback will move on to the next node. This works
with arbitrarily-deep transitive chains.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the node.</p></li>
<li><p><strong>primary</strong> (<a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><em>T</em><em> | </em><em>None</em><em>]</em>) – The node to use as the primary input, if it is available.</p></li>
<li><p><strong>fallback</strong> (<a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a><em>[</em><em>T</em><em>]</em>) – The node to use if the primary input does not provide a value.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="lenskit.pipeline.Node.html#lenskit.pipeline.Node" title="lenskit.pipeline.nodes.Node"><em>Node</em></a>[<em>T</em>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="pipeline.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Pipeline API</p>
      </div>
    </a>
    <a class="right-next"
       href="lenskit.pipeline.PipelineState.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">lenskit.pipeline.PipelineState</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline"><code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.__init__"><code class="docutils literal notranslate"><span class="pre">Pipeline.__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.meta"><code class="docutils literal notranslate"><span class="pre">Pipeline.meta()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.nodes"><code class="docutils literal notranslate"><span class="pre">Pipeline.nodes</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.node"><code class="docutils literal notranslate"><span class="pre">Pipeline.node()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.create_input"><code class="docutils literal notranslate"><span class="pre">Pipeline.create_input()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.literal"><code class="docutils literal notranslate"><span class="pre">Pipeline.literal()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.set_default"><code class="docutils literal notranslate"><span class="pre">Pipeline.set_default()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.get_default"><code class="docutils literal notranslate"><span class="pre">Pipeline.get_default()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.alias"><code class="docutils literal notranslate"><span class="pre">Pipeline.alias()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.add_component"><code class="docutils literal notranslate"><span class="pre">Pipeline.add_component()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.replace_component"><code class="docutils literal notranslate"><span class="pre">Pipeline.replace_component()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.connect"><code class="docutils literal notranslate"><span class="pre">Pipeline.connect()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.component_configs"><code class="docutils literal notranslate"><span class="pre">Pipeline.component_configs()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.clone"><code class="docutils literal notranslate"><span class="pre">Pipeline.clone()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.get_config"><code class="docutils literal notranslate"><span class="pre">Pipeline.get_config()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.config_hash"><code class="docutils literal notranslate"><span class="pre">Pipeline.config_hash()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.from_config"><code class="docutils literal notranslate"><span class="pre">Pipeline.from_config()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.train"><code class="docutils literal notranslate"><span class="pre">Pipeline.train()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.run"><code class="docutils literal notranslate"><span class="pre">Pipeline.run()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.run_all"><code class="docutils literal notranslate"><span class="pre">Pipeline.run_all()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lenskit.pipeline.Pipeline.use_first_of"><code class="docutils literal notranslate"><span class="pre">Pipeline.use_first_of()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/api/lenskit.pipeline.Pipeline.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2018–2024 Drexel University, Boise State University, and collaborators.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>